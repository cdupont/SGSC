\section{Implementation}
\label{sec:implem}

The use case of the SFA is quite different from the SLA. 
It is used in the communication between an application and the underlying PaaS framework, while the SLA is used for the communication between the data centre and its clients, as shown in figure~\ref{fig:SFABlock}.

\ms{Perhaps would be better to use 'App performance scaler' instead of 'App load balancer'}
\begin{figure}[h]
\label{fig:SFABlock}
\centering
\digraph[scale=0.5]
{SFABlock}
{
   PaaS[shape=rectangle, label="Cloud Foundry"];
   autoScaler[shape=rectangle, label="Auto-scaler"];
   loadBalancer[shape=rectangle, label="Application"];
   VM1[label="FE VM1"];
   VM2[label="FE VM2"];
   VM3[label="FE VM3"];
   loadBalancer->autoScaler[label=" SFA"];
   autoScaler->PaaS[label=" scale up/down"];
   PaaS->VM1;
   PaaS->VM2;
   PaaS->VM3;
}
\caption{SFA block diagram}
\end{figure}

In practice, we modify Cloud Foundry auto-scaler API to accept commands from the application load balancer.
Instead of just scale-up/scale-down commands, we include a recommended scaling level, together with a positive deviation and a negative deviation, as described in Section~\ref{sec:sfa}.
This will let an enhanced auto-scaler to optimize the energy consumption in the data centre. In addition, if the data center uses renewable energies auto-scaler can be adaptive to the availability of renewable energies.